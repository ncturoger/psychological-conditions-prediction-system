<!DOCTYPE html>
<link rel="stylesheet" type="text/css" href="../static/css/semantic.min.css">
<script src="../static/js/jquery-3.3.1.min.js"></script>
<script src="../static/js/semantic.min.js"></script>
<script src="../static/js/jquery.blockUI.js"></script>
<html>

<head>
	<title>填表單</title>
</head>
<script>

</script>
<style>
	body {
		padding: 8em;
		background-image: url("../static/assets/images/background.png") ;
		background-repeat: no-repeat;
		background-size: cover; 
	}

	.spaced>.button {
		margin-bottom: 1em;
	}

	
</style>

<body class="landing-image">
	<div class="main ui container">
		<div class="ui segment1">
			<div class="ui dimmer" id='loader'>
				<div class="ui text loader">預測中</div>
			</div>
			<div class="ui form">
				<form id="fm" name="fm" action="/predict" method="POST">
					<h1 class="ui center aligned dividing header">填選案例資料</h1>
					<label>基本資料</label>
					<div class="inline fields">
						<label>性別</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="gender" checked="checked" type="radio" value="male">
								<label>男</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="gender" type="radio" value="female">
								<label>女</label>
							</div>
						</div>
					</div>
					<div class="fields">
						<div class="field">
							<label>年齡</label>
							<input placeholder="請輸入年齡" type="text" id="age" name="age" required="required"
								onkeyup="value=value.replace(/[^\d]/g,'')">
						</div>
						<div class="field">
							<label>教育程度</label>
							<select class="ui fluid dropdown" id="education" name="education">
								<option value="s">高中</option>
								<option value="u">大學</option>
								<option value="g">碩士</option>
							</select>
						</div>
					</div>
					<div class="inline fields">
						<label>役別</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="militaryservice" checked="checked" type="radio" value="v">
								<label>志願役</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="militaryservice" type="radio" value="c">
								<label>義務役</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>階級</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="rank" checked="checked" type="radio" value="soldier">
								<label>士兵</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="rank" type="radio" value="sergeant">
								<label>士官</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="rank" type="radio" value="officer">
								<label>軍官</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>服役時間</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="time" checked="checked" type="radio" value="S">
								<label>一年內</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="time" type="radio" value="M">
								<label>一至三年</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="time" type="radio" value="L">
								<label>三年以上</label>
							</div>
						</div>
					</div>
					<div class="field">
						<label>心理測驗結果</label>
						<select class="ui fluid dropdown" id="testResult" name="testResult">
							<option value="">無</option>
							<option value="lieType">未通過測謊</option>
							<option value="counselingType">心理諮商組/關懷輔導組/諮商輔導組/基層幹部協助組</option>
							<option value="referralMedicalType">轉介醫療組</option>
							<option value="highlyCaredType">高度關懷</option>
							<option value="needCareType">尚需關懷群</option>
							<option value="mediumHeightCareType">需中高度關懷群</option>
							<option value="generalType">一般組</option>
							<option value="adaptWellType">適應良好群</option>
							<option value="moderateCareType">需中度關懷群</option>
							<option value="Etype">e型</option>
							<option value="Ctype">c型</option>　
						</select>
					</div>
					<div class="inline fields">
						<label>是否有自殺史</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="01.sui_history" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="01.sui_history" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有自殺訊息</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="02.had_sui_message" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="02.had_sui_message" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有痼疾</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="03.disease" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="03.disease" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有藥物濫用</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="04.sub_abuse" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="04.sub_abuse" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有性別焦慮</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="05.Gender_disorder" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="05.Gender_disorder" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否心理狀況不佳</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="06.mtl_illness" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="06.mtl_illness" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有家族自殺史</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="07.fam_sui_history" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="07.fam_sui_history" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否情緒失衡</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="08.emo_imbalance" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="08.emo_imbalance" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否拒絕服務</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="09.rej_service" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="09.rej_service" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有人際關係壓力</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="10.relationship issue" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="10.relationship issue" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有家庭壓力</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="11.fam_problem" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="11.fam_problem" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有內部壓力</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="12.inter_problem" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="12.inter_problem" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有社交支持</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="13.social_support" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="13.social_support" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否適應不良</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="14.maladaptive" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="14.maladaptive" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有工作壓力</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="15.wk_pressure" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="15.wk_pressure" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有管理壓力</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="16.mng_problem" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="16.mng_problem" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否遭逢挫折</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="17.setbacks" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="17.setbacks" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有被懲處</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="18.punish&jud_case" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="18.punish&jud_case" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否有經濟壓力</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="19.eco_burden" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="19.eco_burden" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div class="inline fields">
						<label>是否債務問題</label>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="20.debt" checked="checked" type="radio" value="1">
								<label>是</label>
							</div>
						</div>
						<div class="field">
							<div class="ui radio checkbox">
								<input name="20.debt" type="radio" value="0">
								<label>否</label>
							</div>
						</div>
					</div>
					<div><input type="button" style="background-image:url(./ui001_test_s.png);width:80px;height:32px;border:0px " id="Send" name="Send" value="提交"
							onclick="SendAndCheck(document.fm);" /></div>
				</form>
			</div>
		</div>
	</div>
	<br>
</body>

</html>
<script>
	$(document)
		.ready(function () { })

	function SendAndCheck(element) {
		var form_data = new FormData();

		if(!element.elements["age"].value || element.elements["age"].value < 0 || element.elements["age"].value >100)
		{
			alert("請填選年齡(1~99)");
			return
		}

		const sleep = (milliseconds) => {
			return new Promise(resolve => setTimeout(resolve, milliseconds))
		}

		form_data.append("01.sui_history", element.elements["01.sui_history"].value)
		form_data.append("02.had_sui_message", element.elements["02.had_sui_message"].value)
		form_data.append("03.disease", element.elements["03.disease"].value)
		form_data.append("04.sub_abuse", element.elements["04.sub_abuse"].value)
		form_data.append("05.Gender_disorder", element.elements["05.Gender_disorder"].value)
		form_data.append("06.mtl_illness", element.elements["06.mtl_illness"].value)
		form_data.append("07.fam_sui_history", element.elements["07.fam_sui_history"].value)
		form_data.append("08.emo_imbalance", element.elements["08.emo_imbalance"].value)
		form_data.append("09.rej_service", element.elements["09.rej_service"].value)
		form_data.append("10.relationship issue", element.elements["10.relationship issue"].value)
		form_data.append("11.fam_problem", element.elements["11.fam_problem"].value)
		form_data.append("12.inter_problem", element.elements["12.inter_problem"].value)
		form_data.append("13.social_support", element.elements["13.social_support"].value)
		form_data.append("14.maladaptive", element.elements["14.maladaptive"].value)
		form_data.append("15.wk_pressure", element.elements["15.wk_pressure"].value)
		form_data.append("16.mng_problem", element.elements["16.mng_problem"].value)
		form_data.append("17.setbacks", element.elements["17.setbacks"].value)
		form_data.append("18.punish&jud_case", element.elements["18.punish&jud_case"].value)
		form_data.append("19.eco_burden", element.elements["19.eco_burden"].value)
		form_data.append("20.debt", element.elements["20.debt"].value)

		console.log("predicting...")

		$.blockUI({ message: '<h1><img src="../static/assets/images/loading.gif" /> 預測中...</h1>' });
		sleep(2000).then(() => {
			$.unblockUI();
			fm.submit();
		})


	}
</script>